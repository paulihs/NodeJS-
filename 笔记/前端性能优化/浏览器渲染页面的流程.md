浏览器如何渲染网页

在浏览器中输入url之后，从服务端接收返回的HTML CSS JavaScript等资源。

然后解析，构建树，渲染布局，绘制，最后呈现给用户

用户看到页面分为两个阶段：

1. `DOMContentLoaded` 事件触发，仅仅完成`DOM`加载，不包含样式表，图片等
2. `load`事件触发，页面上所以的`DOM` 样式表`css` 脚本`script` 图片都加载完成

浏览器渲染的主要过程：

1. 浏览器将获取到的HTML解析成DOM树。
2. 处理css， 构成 层叠样式表模型CSSOM(CSS Object Model)。
3. 将DOM和CSSOM合并为渲染树，代表将要被渲染的对象。渲染树构建完毕之后，每个可见的内容都会得到他的样式，但是具体计算内容的确切位置与大小，要到布局阶段。
4. 布局（layout）阶段会从渲染树的根节点开始遍历，然后确定每个节点对象在页面上的确切大小与位置。
5. 布局事件完成之后，浏览器会立即发出Paint Setup与Paint事件。
6. 将每个节点绘制到屏幕

![浏览器渲染过程](E:\NodeJS-Study\笔记\前端性能优化\htmlrender.jpg)

总结： 

1. HTML代码转化成DOM
2. CSS代码转化成CSSOM（CSS Object Model）
3. 结合DOM和CSSOM，生成一棵渲染树（包含每个节点的视觉信息） render tree
4. 生成布局（layout），即将所有渲染树的所有节点进行平面合成   layout
5. 将布局绘制（paint）在屏幕上     paint

从1到3的速度是非常快的，第4和第5步，比较耗时。
第四步 生成布局 称之为flow 
第五步 绘制 称之为paint
这两步合称 “渲染” （render）

> 要想提高网页渲染的性能，就要减少 重新生成布局和重新绘制。
 这就是为什么要减少网页的“重绘”（repaint）和重排（reflow）。
  重排又称为回流。







https://cloud.tencent.com/developer/article/1495980
