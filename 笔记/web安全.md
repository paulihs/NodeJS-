我们总是在说信息安全管理，那么信息安全管理到底是在管什么？我们要如何定义信息安全？

这里就要引出信息安全最基本的概念：CIA三元组。

- 这里的 C，指的是Confidentiality **机密性**
- 这里的 I ，指的是Integrity **完整性**
- 这里的 A ，指的是Availability **可用性**

为什么说CIA三元组是信息安全最基本的原则呢？因为我们做的信息安全管理，就是为了保障信息的机密性、完整性、可用性。这是贯穿整个信息安全管理全局的一个思路。包括在进行信息安全评估的时候，通常也从这三个方向着手进行分析。

机密性、完整性、可用性三者相互依存，形成一个不可分割的整体，三者中任何一个的损害都将影响到整个安全系统



### XSS攻击（Cross-Site Scripting，跨站脚本攻击）是如何产生的？





## XSS攻击有几种类型：

第一、XSS反射型攻击，指的是恶意脚本作为网络请求的一部分。

比如输入网址：

```
http://david.com?greeting=<script>alert("你完蛋了")</script>
```

服务器拿到greeting参数之后会将greeting写入HTML，作为HTML的一部分解析。然后发现他是一个脚本，直接执行，这样就被攻击了。一般这种情况发生在那种前后端没有分离的项目上，像jsp和php页面就有这种情况。

第二、XSS存储型攻击，恶意代码被保存到目标网站的服务器中，这种攻击具有较强的稳定性和持久性，比较常见场景是在博客，论坛等社交网站上，但OA系统，和CRM系统上也能看到它身影，比如：某CRM系统的客户投诉功能上存在XSS存储型漏洞，黑客提交了恶意攻击代码，当系统管理员查看投诉信息时恶意代码执行，窃取了客户的资料，然而管理员毫不知情，这就是典型的XSS存储型攻击。还有就是在论坛中提交评论，在评论中输入恶意代码，评论被服务器储存，那么每个看到这个帖子，浏览到这个评论的用户都会执行恶意代码，从而被攻击。



第三种：文档型

文档型的XSS攻击不会结果服务器，而是作为中间人的角色在数据传输过程中劫持到网络数据包，然后修改里面的HTML文档。这样的劫持方式包括WIFI路由器劫持或者 本地恶意软件等。

这种中间人攻击的本质是http是用明文传输的，很容易被第三方窃取、篡改。具体来说就是HTTP数据经过TCP层，然后经过WIFI路由器、运营商、目标服务器。这些中间环节每一个都可能被中间人拿到数据并进行篡改，这就是我们常说的 **中间人攻击**

那么如何避免中间人攻击呢？ 使用HTTPS进行传输。


## XSS攻击能做什么：
1. 窃取cookies，读取目标网站的cookie发送到黑客的服务器上
2. 读取用户未公开的资料，如果：邮件列表或者内容、系统的客户资料，联系人列表等等
3. 修改DOM
4. 在页面找那个生成浮层广告
## 解决方案：
1. url过滤，对<script> <img> <a> 等标签进行过滤。

2. 对提交的符号如：尖括号，引号，单引号，百分比符号，分号，括号，&符号，加号进行编码转义，严格控制输出。~~对于富文本的内容可以在提交前先 encodeURIComponent，然后在页面展示之前再decodeURIComponent。~~（删掉的原因是富文本的目的就是把内容当成HTML来渲染，同时一般来说支持富文本的功能都有其特定的权限，目的。所以这个不需要考虑，而且encode和decode之后其实是无事发生。）

3. 一切用户输入皆不可信，`在输出时进行验证`

   将 `HTML 元素内容、属性以及 URL 请求参数、CSS 值进行编码`

   当编码影响业务时，使用`白名单规则进行检测和过滤`

   使用 W3C 提出的 `CSP (Content Security Policy，内容安全策略)`，定义域名白名单

   设置 `Cookie 的 HttpOnly` 属性

   

## 跨站请求伪造（CSRF）
### 首先说明一下什么是CSRF(Cross Site Request Forgery)？

跨站请求伪造是指攻击者可以在第三方站点制造HTTP请求并以用户在目标站点的登录态发送到目标站点，而目标站点未校验请求来源使第三方成功伪造请求。

#### 为什么会有CSRF?

JS控制浏览器发送请求的时候，浏览器是根据目标站点，而不是来源站点，来发送cookie的，如果当前会话中有目标站点的cookie（就是说当前有标签页处于目标站点，而且没有退出登录，这点非常重要！），就发送出去。核心问题是浏览器的会话机制，是跨站请求伪造漏洞的根源。

再简单解释一下：比如我现在打开了百度的网页，然后我在一个空白的标签页上输入百度的网址，这时候这个请求中会带有来自于前面打开的百度网页中的Cookie。虽然说Cookie不支持跨域，但是前面所描述的场景不属于跨域。只是说在当前浏览器的会话中存在目标站点的会话的话，就会把这个站点的Cookie发送出去。

 

CSRF(Cross-site request forgery跨站请求伪造，也被称成为“one click attack”或者session riding，通常缩写为CSRF或者XSRF，是一种对网站的恶意利用。

### 防御措施
1. 服务端检查Referer字段，验证请求来源站点。
2. 请求添加校验token
3. 针对实际情况，设置关键 Cookie 的 `SameSite` 属性为 `Strict` 或 `Lax`


### 参考文章
https://baike.baidu.com/item/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/13777878?fr=aladdin
https://www.cnblogs.com/qmfsun/p/5779469.html 



